\documentclass[14pt,a4paper]{report}
\usepackage{russ}
\usepackage[cp1251]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[8pt]{extsizes}
\usepackage{setspace}
\usepackage{tocloft}
\renewcommand{\baselinestretch}{1.5}
\usepackage[pdftex]{graphicx}
\usepackage{geometry} % Меняем поля страницы
\geometry{left=3cm}% левое поле
\geometry{right=2cm}% правое поле
\geometry{top=2cm}% верхнее поле
\geometry{bottom=1.5cm}% нижнее поле
\graphicspath{{images/}}
\bibliographystyle{unsrt}
%convert nps.png nps.eps

\begin{document}


\newpage
% ТИТУЛЬНЫЙ ЛИСТ НАЧИНАЕТСЯ
\thispagestyle{empty}
\begin{titlepage}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{msu-building}\\
\end{figure}

\begin{spacing}{1.0} % устанавливаем межстрочный интервал
\begin{center} % центрируем текст
	{\small
		Московский государственный университет имени М.В. Ломоносова \\
		Факультет вычислительной математики и кибернетики \\
		Кафедра автоматизации систем вычислительных комплексов \\
	}
	\vspace{4cm}
	{\large Михеев Павел Алексеевич\\}
	\vspace{1cm}
	{\large\bfseries
		Исследование эффективности использования физических ресурсов \\
        легковесными контейнерами в облачных системах.
	}
	\vspace{1cm}
	
\end{center}

\begin{flushright}
\begin{small}
	{\bfseries Научный руководитель: \\}
	к.ф.-м.н. \\
	В.А. Антоненко \\
\end{small}
\end{flushright}

\vfill

\centerline{Москва, 2018}
\end{spacing}
\end{titlepage}

\newpage
\section*{Аннотация}
\addcontentsline{toc}{chapter}{Аннотация}
Контейнер - изолированная группа процессов в операционной системе, имеющая доступ к ограниченному количеству ресурсов системы. 
Данная изоляция достигается за счет механизмов ядра ОС, таким образом, контейнеры используют это ядро, не тратя ресурсы на поддержку гостевого ядра.

Контейнеры обладают небольшим временем запуска, большой пропускной способностью, и показатель производительности вычислений в них ближе к показателю 
вычислений на физичеких ресурсах. Однако не существует систем, позволяющих исследовать производительность и деградацию производительности 
контейнеров при масштабировании и сравнить ее с производительностью и деградацией для виртуальных машин.

В данной работе предлагается использовать существующие методики измерения производительности виртуальных машин и применить их к легковесным контейнерам.

Целью работы является разработка системы измерения производительности и ее деградации у виртуальных машин и контейнеров, запущенных на физическом сервере.

Данная система позволит сравнить численно производительность контейнеров и виртуальных машин.
\newpage
\section*{Введение}
\addcontentsline{toc}{chapter}{Введение}
   Облачные вычисления в современной информационной среде занимают все больше и больше пространства. Развитие открытого программного обеспечения по управлению облаками увеличивает количество тех, кто использует облачные системы как для использования внутри компании, так и для предоставления услуг клиентам. Одним из немногих сдерживающих факторов такого роста вовлеченности использования облачных вычислений является цена физического оборудования.

   Традиционно облачные вычисления используют виртуальные машины как сущности, которые так или иначе предоставляются пользователю. Так, в случае облака, работающего по модели Infrastructure-as-a-Service (IaaS), пользователю предоставляется полный доступ к заказанной виртуальной машине, которую он настраивает под собственные требования. В облаках типа Platform-as-a-Service предоставляется доступ к интерфейсам некоторых приложений, запущенных в виртуальной машине. В облаках Software-as-a-Service пользователь запрашивает услугу, обработка которой происходит с помощью виртуальных машин, доступа к которым у пользователя нет.

   Количество виртуальных машин, которое может быть запущено в облаке, напрямую зависит от количества физических ресурсов. Под количеством физических ресурсов в данной работе будет пониматься совокупное (по всем серверам) количество ядер процессоров, совокупное количество оперативной памяти и совокупный объем жестких дисков системы.

   Пусть X - количество доступных физических ресурсов в облаке, а $\chi_i$ - количество ресурсов, требующихся для $i$-ой виртуальной машины. Тогда $n$ - максимальное число виртуальных машин с такими требованиями, которое может быть запущено на данных ресурсах, если $\sum\limits_{i=1}^n \chi_i = X$.

   Однако может возникать ситуация, когда количество запрашиваемых виртуальных машин превосходит максимальное число $n$, определенное выше. При этом у владельца облака нет возможности или необходимости докупить оборудование, так как, к примеру, такая ситуация возникает редко. Важный момент, что ресурсы виртуальной машины могут быть использованы ее процессами не на 100\%
   процентов. Тогда, если предоставить доступ к этим же физическим ресурсам или их части той виртуальной машине, номер которой превосходит $n$, то обе эти виртуальные машины смогут осуществлять свои функции. В таком случае $\sum\limits_{i=1}^n \chi_i > X$, но при этом все виртуальные машины размещены.

   Введем коэффициент $\theta = \frac{\sum\limits_{i} \chi_i}{X} $ - коэффициент перекрытия (overlap), являющийся отношением суммы ресурсов, требуемых виртуальным машинам системы, к физическим ресурсам системы.

   Разумеется, при увеличении коэффициента перекрытия производительность процессов в виртуальных машинах падает, так как при использовании одних физических ресурсов (в первую очередь, ядер процессора) разными виртуальными машинами исполнение машин одновременно будет невозможно. Из-за этого будет наблюдаться деградация производительности виртуальных машин при увеличении коэффициента перекрытия.

   Еще одной быстро занявшей рынок технологией стала легковесная виртуализация. В этой технологии виртуализации гостевая операционная система отсутствует, а все процессы запускаются в рамках ядра хостовой операционной системы. Изоляция подобных процессов друг от друга и ограничение доступных им ресурсов достигается за счет специальных механизмов ядра. Такие процессы и их потомки с наложенными на них ограничениями называются контейнерами. Так же как и процессы в виртуальной машине изолированы от процессов другой виртуальной машины, процессы в контейнере изолированы от процессов других контейнеров. Отличие заключается в том, что системные вызовы в виртуальной машине идут в операционную систему машины, тогда как системные вызовы контейнеров идут напрямую к ядру операционной системы, в которой данный контейнер запущен.

   Отсутствие необходимости поддерживать гостевую операционную систему обладает как достоинствами, так и недостатками. Подробнее о них будет сказано ниже.

   Контейнеры могут быть использованы в облачных системах так же, как и виртуальные машины. Они потребляют некоторое количество ресурсов, ресурсы могут разделять между несколькими контейнерами, а при увеличении коэффициента перекрытия будет наблюдаться деградация производительности.

   В данной работе предлагается исследовать и сравнить производительность виртуальных машин и контейнеров, а так же деградацию производительности машин и контейнеров при увеличении коэффициента перекрытия. Для этого была разработана система, способная запускать виртуальные машины или контейнеры и запускать в них приложения, позволяющие измерять производительность, а так же собирать результаты работы этих приложений.

   Основной гипотезой данной работы является следующее: контейнеры обладают более высокой производительностью по сравнению с виртуальными машины, деградация производительности виртуальных машин при увеличении коэффициента перекрытия происходит быстрее, чем у контейнеров.


\chapter{Постановка задачи}
\section*{Цель работы}
     Разработать и реализовать систему, позволяющую сравнить производительность виртуальных машин и контейнеров, а так же деградацию производительности виртуальных машин и контейнеров при увеличении коэффициента перекрытия.

      С помощью разработанной системы провести эксперименты, позволяющие проверить следующую гипотезу:
      \textbf{контейнеры обладают более высокой производительностью по сравнению с виртуальными машины, деградация производительности виртуальных машин при увеличении коэффициента перекрытия происходит быстрее, чем у контейнеров.}

\section*{План решения задачи}
     \begin{enumerate}
     \item Сравнить различные технологии виртуализации.
     \item Составить обзор существующих решений, с помощью которого выделить методики оценки производительности виртуальных машин.
     \item Выбрать из предыдущего обзора методику оценки производительности или разработать свою, которую возможно применить для оценки производительности контейнеров.
     \item Разработать систему, реализующую методику оценки производительности из предыдущего пункта, позволяющий численно оценить производительность и ее деградацию при увеличении коэффициента перекрытия в случае виртуальных машин и контейнеров.
     \item С помощью разработанной системы провести эксперименты, позволяющие проверить следующую гипотезу:
      \textbf{контейнеры обладают более высокой производительностью по сравнению с виртуальными машины, деградация производительности виртуальных машин при увеличении коэффициента перекрытия происходит быстрее, чем у контейнеров.}
     \end{enumerate}
     
\chapter{Технологии виртуализации}
В данном разделе под хостовой операционной системой будет пониматься система, в которой могут быть запущены гостевые операционные системы. Гостевые операцинные системы - это те системы, которые видят лишь свое изолированное окружение, и которые не могут быть осведомлены о наличии других гостевых систем, кроме как через сеть. Под виртуальной сущностью будет пониматься тот процесс в хостовой операцинной системе, который исполняет вычисления гостевой операционной системы. 

Гипервизор - специализированное программное обеспечение, которое занимается управлением гостевыми операционными системами: запуском, остановкой, наблюдением и выделением ресурсов. Гипервызиоры бывают двух типов:
\begin{enumerate}
    \item Нативные гипервизоры, которые запускаются напрямую на оборудовании хоста, контролируют это оборудования и
    осуществляют наблюдение за гостевыми операционными системами.
    \item  Гипервизоры, которые запускаются поверх операционной системы хоста и осуществляют мониторинг гостевой
    операционной системы.
\end{enumerate} 

Виртуализация - такой подход к организации вычислений, при котором каждая виртуализированная сущность изолирована от других, причем ей может быть доступна лишь часть общих ресурсов. Существует четыре основных вида виртуализации: программная вирутализация, паравиртуализация, аппаратная виртуализация и легковесная виртуализация. Далее будут рассмотрены каждый из этих видов, а так же их достоинства, недостатки и применимость в облачных системах.

\section{Программная виртуализация}
Данный вид виртуализации является исторически первым, его еще называют полной виртуализацией. Основная его особенность заключается в том, что  гостевая операционная системы полностью отделяется от управления инфраструктурой хоста. Гостевая ОС не требует никаких изменений, и не осведомлена, что запущена в виртуальном окружении. 

Как следует из названия, данный вид виртуализации позволяет запустить любую гостевую операционную систему в любой хостовой. Единственное требование - это наличие динамического транслятора из машинного языка архитектуры, с которой работает гостевая операционная система, в машиный язык хостовой архитектуры. В основе работы данного вида виртуализации лежит принцип динамической трансляции \cite{virt_decs}.

Преимуществом данного вида виртуализации является гипотетическая возможность запускать любую гостевую операционну систему. 

При этом основное преимущесво оборачивается и основным недостатком. При современном разнообразии вычислиельной техники невозможно иметь трансляторы с любого машинного языка в любой. Но даже при наличии транслятора возможно, что скорость исполнения гостевого кода будет гораздо медленнее, чем в случае исполнения на настоящей архитектуры. Дополнительно к этим недостаткам добавляются сложность реализации динамической трансляции, связанной, к примеру, с неразличимостью команд и данных.

При этом существует ряд гипервизоров, поддерживающих полную виртуализацию. Примерами могут быть VMware ESXi, Microsoft Virtual Server \cite{virt_decs}. Стоит отметить, что в силу закрытости данного програмнного обеспечения, их исследование в данной работе проивзведено не будет.

\section{Паравиртуализация}




\chapter{Обзор существующих решений}
    Привет, git. Почему ты не работаешь?

\begin{thebibliography}{99}


\bibitem{lxcvsvm} Wes Felter, Alexandre Ferreira [и др.]. An Updated Performance Comparison of Virtual Machines and Linux Containers. // IBM Research Report, 2014.

\bibitem{mach-learn} George Kousiouris, Tommaso Cucinotta, Theodora Varvarigoua. The effects of scheduling, workload type and consolidation scenarios on virtual machine performance and their prediction through optimized artificial neural networks. // The Journal of Systems and Software, 2011.

\bibitem{beloglazov} Anton Beloglazov, Rajkumar Buyya. Optimal online deterministic algorithms and adaptive heuristics for energy and performance efficient dynamic consolidation of virtual machines in Cloud data centers. // Wiley Online Library, 2011.

\bibitem{china} Haikun Liu, Hai Jin, Cheng-Zhong Xu, Xiaofei Liao. Performance and energy modeling for live migration of virtual machines. // Springer US, 2013.

\bibitem{virt_decs} Hyungro Lee. Virtualization Basics: Understanding Techniques and Fundamentals. // School of Informatics and Computing, Indiana University, 2014.

\bibitem{virtualbox} Homepage of VirtualBox. https://www.virtualbox.org (дата обращения 01.09.2017)

\bibitem{Xen} Homepage of Xen. https://www.xenproject.org (дата обращения 01.09.2017)

\bibitem{VMWare} Homepage of VMWare ESX. http://www.vmware.com/ru/products/esxi-and-esx.html (дата обращения 01.09.2017)

\bibitem{qemu} Homepage of Qemu. http://www.qemu.org (дата обращения 01.09.2017)

\bibitem{KVM} Homepage of KVM. https://www.linux-kvm.org (дата обращения 01.09.2017)

\bibitem{LXC} Homepage of LXC. URL: https://linuxcontainers.org/ru/ (дата обращения 01.09.2017)

\bibitem{OpenVZ} Homepage of OpenVZ. URL: https://openvz.org/ (дата обращения 31.10.2017)

\bibitem{Rocket} Homepage of Rocket. URL: https://coreos.com/rkt/docs/latest/ (дата обращения 31.10.2017)

\bibitem{drawbridge} Homepage of DrawBridge. URL: http://research.microsoft.com/en-us/projects/drawbridge/ (дата обращения 31.10.2017)

\bibitem{runC} Homepage of runC. URL: https://runc.io/ (дата обращения 30.04.2017)

\bibitem{Docker} Homepage of Docker.  URL: https://docs.docker.com/ (дата обращения 01.09.2017)

\end{thebibliography}


\end{document} 